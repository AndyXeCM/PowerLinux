{% extends "layout.html" %} {% block content %}
<div class="main-content mw-dashboard">
    <mdui-card class="mw-card mw-page-header">
        <div class="mw-page-left">
            <div class="mw-page-title">系统</div>
            <div class="mw-page-sub" id="info">正在获取中...</div>
            <div class="mw-page-sub mw-page-runtime" id="running"></div>
        </div>
        <div class="mw-page-actions">
            <span class="mw-version" id="version">{{config.version}}</span>
            <mdui-button variant="text" href="javascript:checkUpdate();" class="mw-link-button" id="toUpdate">更新</mdui-button>
            <mdui-button variant="text" href="javascript:reBoot();" class="mw-link-button">重启</mdui-button>
        </div>
    </mdui-card>

    <div class="mw-dashboard-body">
        <div class="danger-tips">
            <div class="alert alert-warning" id="messageError" style="display: none;background-color: #ffe0e0;border-color: #ffb0b0;color: #ff2020; margin-bottom:0;margin-top: 12px;"></div>
        </div>

        <mdui-card class="mw-card">
            <div class="mw-card-header">
                <div class="mw-card-title">状态</div>
            </div>
            <div class="mw-card-content">
                <ul class="mw-stat-grid" id="systemInfoList">
                    <li class="circle-box text-center mw-stat-item" id="LoadList">
                        <h3 class="c5 f15">负载状态<a href="https://github.com/midoks/mdserver-web/wiki#负载简述" target="_blank" class="bt-ico-ask" style="cursor: pointer;">?</a></h3>
                        <div class="mw-stat-progress">
                            <mdui-linear-progress id="LoadProgress" value="0"></mdui-linear-progress>
                        </div>
                        <div class="mw-stat-value mask"><span id="Load">0</span>%</div>
                        <div id="LoadState" class="mw-stat-status c5 f15">获取中...</div>
                    </li>
                    <li class="circle-box text-center mw-stat-item" id="cpuChart">
                        <h3 class="c5 f15">CPU使用率</h3>
                        <div class="mw-stat-progress">
                            <mdui-linear-progress id="CpuProgress" value="0"></mdui-linear-progress>
                        </div>
                        <div class="mw-stat-value mask"><span id="state">0</span>%</div>
                        <div id="core" class="mw-stat-status c5 f15">获取中...</div>
                    </li>
                    <li class="circle-box text-center mw-stat-item mem-release" id="memChart">
                        <h3 class="c5 f15">内存使用率</h3>
                        <div class="mw-stat-progress">
                            <mdui-linear-progress id="MemProgress" value="0"></mdui-linear-progress>
                        </div>
                        <div class="mw-stat-value mask"><span id="left">0</span>%</div>
                        <div id="memory" class="mw-stat-status c5 f15">获取中...</div>
                        <mdui-button id="memReleaseBtn" variant="text" class="mw-mem-release-btn">释放内存</mdui-button>
                    </li>
                </ul>
            </div>
        </mdui-card>

        <mdui-card class="mw-card">
            <div class="mw-card-header">
                <div class="mw-card-title">概览</div>
            </div>
            <div class="mw-card-content">
                <ul class="mw-overview-grid text-center" id='index_overview'>
                    <li class="sys-li-box mw-overview-item">
                        <p class="name f15 c9">网站</p>
                        <div class="val"><a class="btlink" href="/site/index">{{data['site_count']}}</a></div>
                    </li>
                </ul>
            </div>
        </mdui-card>

        <div class="mw-grid">
            <mdui-card class="mw-card mw-grid-item">
                <div class="mw-card-header">
                    <div class="mw-card-title">软件</div>
                </div>
                <div class="mw-card-content">
                    <div class="setting-con mw-soft-container">
                        <div class="container-fluid soft-man">
                            <input name="list1SortOrder" type="hidden" value="" />
                            <div id="indexsoft" class="row"></div>
                        </div>
                    </div>
                </div>
            </mdui-card>

            <mdui-card class="mw-card mw-grid-item">
                <div class="mw-card-header tabs-nav">
                    <div class="tab-list">
                        <span class="tabs-item active">流量</span>
                        <span class="tabs-item">磁盘IO</span>
                    </div>

                    <div class="tabs-down">
                        <select class="bt-input-text" name="network-io" style="font-size: 12px;">
                            <option value="ALL">全部</option>
                        </select>
                        <select class="bt-input-text hide" name="disk-io" style="font-size: 12px;">
                            <option value="ALL">全部</option>
                        </select>
                    </div>
                </div>

                <div class="mw-card-content tabs-content">
                    <div class="tabs-active tabs-item">
                        <div class="bw-info">
                            <div class="col-sm-6 col-md-3"><p class="c9"><span class="ico-up"></span>上行</p><a id="upSpeed">0</a></div>
                            <div class="col-sm-6 col-md-3"><p class="c9"><span class="ico-down"></span>下行</p><a id="downSpeed">0</a></div>
                            <div class="col-sm-6 col-md-3"><p class="c9">总发送</p><a id="upAll">0</a></div>
                            <div class="col-sm-6 col-md-3"><p class="c9">总接收</p><a id="downAll">0</a></div>
                        </div>
                        <div id="netImg" class="mw-chart"></div>
                    </div>

                    <div class="tabs-item">
                        <div class="bw-info">
                            <div class="col-sm-6 col-md-3"><p class="c9"><span class="ico-read"></span>读取</p><a id="readBytes">0</a></div>
                            <div class="col-sm-6 col-md-3"><p class="c9"><span class="ico-write"></span>写入</p><a id="writeBytes">0</a></div>
                            <div class="col-sm-6 col-md-3"><p class="c9">每秒读写</p><a id="diskIops">0</a></div>
                            <div class="col-sm-6 col-md-3"><p class="c9">读写IO延迟</p><a id="diskTime" style="color: rgb(32, 165, 58);">0</a></div>
                        </div>
                        <div id="ioStat" class="mw-chart"></div>
                    </div>
                </div>
            </mdui-card>
        </div>
    </div>
</div>
<script type="text/javascript" src="/static/app/site.js?v={{config.version}}"></script>
<script type="text/javascript" src="/static/app/soft.js?v={{config.version}}"></script>
<script type="text/javascript" src="/static/app/index.js?v={{config.version}}"></script>
<script type="text/javascript">

index.init();

pluginInit();
//加载关键数据总数
loadKeyDataCount();

setTimeout(function() {
    getDiskInfo();
}, 500)

setTimeout(function() {
    indexSoft();
}, 1000);

setTimeout(function() {
    getInfo();
}, 200);

</script>
{% endblock %}
